



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Computer Science Notes Operating System LeetCode Python Machine Learning">
      
      
        <link rel="canonical" href="https://walkccc.github.io/CS/OS/Chap08/">
      
      
        <meta name="author" content="Jay Chen">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.5">
    
    
      
        <title>Chapter 8 Main Memory - Computer Science Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/style.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M409.132,114.573c-19.608-33.596-46.205-60.194-79.798-79.8C295.736,15.166,259.057,5.365,219.271,5.365
		c-39.781,0-76.472,9.804-110.063,29.408c-33.596,19.605-60.192,46.204-79.8,79.8C9.803,148.168,0,184.854,0,224.63
		c0,47.78,13.94,90.745,41.827,128.906c27.884,38.164,63.906,64.572,108.063,79.227c5.14,0.954,8.945,0.283,11.419-1.996
		c2.475-2.282,3.711-5.14,3.711-8.562c0-0.571-0.049-5.708-0.144-15.417c-0.098-9.709-0.144-18.179-0.144-25.406l-6.567,1.136
		c-4.187,0.767-9.469,1.092-15.846,1c-6.374-0.089-12.991-0.757-19.842-1.999c-6.854-1.231-13.229-4.086-19.13-8.559
		c-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559
		c-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-0.951-2.568-2.098-3.711-3.429c-1.142-1.331-1.997-2.663-2.568-3.997
		c-0.572-1.335-0.098-2.43,1.427-3.289c1.525-0.859,4.281-1.276,8.28-1.276l5.708,0.853c3.807,0.763,8.516,3.042,14.133,6.851
		c5.614,3.806,10.229,8.754,13.846,14.842c4.38,7.806,9.657,13.754,15.846,17.847c6.184,4.093,12.419,6.136,18.699,6.136
		c6.28,0,11.704-0.476,16.274-1.423c4.565-0.952,8.848-2.383,12.847-4.285c1.713-12.758,6.377-22.559,13.988-29.41
		c-10.848-1.14-20.601-2.857-29.264-5.14c-8.658-2.286-17.605-5.996-26.835-11.14c-9.235-5.137-16.896-11.516-22.985-19.126
		c-6.09-7.614-11.088-17.61-14.987-29.979c-3.901-12.374-5.852-26.648-5.852-42.826c0-23.035,7.52-42.637,22.557-58.817
		c-7.044-17.318-6.379-36.732,1.997-58.24c5.52-1.715,13.706-0.428,24.554,3.853c10.85,4.283,18.794,7.952,23.84,10.994
		c5.046,3.041,9.089,5.618,12.135,7.708c17.705-4.947,35.976-7.421,54.818-7.421s37.117,2.474,54.823,7.421l10.849-6.849
		c7.419-4.57,16.18-8.758,26.262-12.565c10.088-3.805,17.802-4.853,23.134-3.138c8.562,21.509,9.325,40.922,2.279,58.24
		c15.036,16.18,22.559,35.787,22.559,58.817c0,16.178-1.958,30.497-5.853,42.966c-3.9,12.471-8.941,22.457-15.125,29.979
		c-6.191,7.521-13.901,13.85-23.131,18.986c-9.232,5.14-18.182,8.85-26.84,11.136c-8.662,2.286-18.415,4.004-29.263,5.146
		c9.894,8.562,14.842,22.077,14.842,40.539v60.237c0,3.422,1.19,6.279,3.572,8.562c2.379,2.279,6.136,2.95,11.276,1.995
		c44.163-14.653,80.185-41.062,108.068-79.226c27.88-38.161,41.825-81.126,41.825-128.906
		C438.536,184.851,428.728,148.168,409.132,114.573z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#chapter-8-main-memory" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://walkccc.github.io/CS" title="Computer Science Notes" class="md-header-nav__button md-logo">
          
            <i class="md-icon">important_devices</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Computer Science Notes
              </span>
              <span class="md-header-nav__topic">
                Chapter 8 Main Memory
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/walkccc/CS/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      walkccc/CS
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Preface" class="md-tabs__link">
        Preface
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../LeetCode/" title="LeetCode in Python" class="md-tabs__link">
          LeetCode in Python
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../" title="Operating System" class="md-tabs__link md-tabs__link--active">
          Operating System
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../ML/" title="Machine Learning" class="md-tabs__link">
          Machine Learning
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://walkccc.github.io/CS" title="Computer Science Notes" class="md-nav__button md-logo">
      
        <i class="md-icon">important_devices</i>
      
    </a>
    Computer Science Notes
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/walkccc/CS/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      walkccc/CS
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Preface" class="md-nav__link">
      Preface
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      LeetCode in Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        LeetCode in Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../LeetCode/" title="Preface" class="md-nav__link">
      Preface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      001-100
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        001-100
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../LeetCode/001-100/001-010/" title="001-010" class="md-nav__link">
      001-010
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../LeetCode/001-100/011-020/" title="011-020" class="md-nav__link">
      011-020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../LeetCode/001-100/021-030/" title="021-030" class="md-nav__link">
      021-030
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../LeetCode/001-100/031-040/" title="031-040" class="md-nav__link">
      031-040
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../LeetCode/001-100/041-050/" title="041-050" class="md-nav__link">
      041-050
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Operating System
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Operating System
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Preface" class="md-nav__link">
      Preface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      PART ONE | OVERVIEW
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        PART ONE | OVERVIEW
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Chap01/" title="Chapter 1 Introduction" class="md-nav__link">
      Chapter 1 Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Chap02/" title="Chapter 2 Operating-System Structures" class="md-nav__link">
      Chapter 2 Operating-System Structures
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      PART TWO | PROCESS MANAGEMENT
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        PART TWO | PROCESS MANAGEMENT
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Chap03/" title="Chapter 3 Processes" class="md-nav__link">
      Chapter 3 Processes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Chap04/" title="Chapter 4 Threads" class="md-nav__link">
      Chapter 4 Threads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Chap05/" title="Chapter 5 Process Synchronization" class="md-nav__link">
      Chapter 5 Process Synchronization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Chap06/" title="Chapter 6 CPU Scheduling" class="md-nav__link">
      Chapter 6 CPU Scheduling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Chap07/" title="Chapter 7 Deadlocks" class="md-nav__link">
      Chapter 7 Deadlocks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4" checked>
    
    <label class="md-nav__link" for="nav-3-4">
      PART THREE | MEMORY MANAGEMENT
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        PART THREE | MEMORY MANAGEMENT
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Chapter 8 Main Memory
      </label>
    
    <a href="./" title="Chapter 8 Main Memory" class="md-nav__link md-nav__link--active">
      Chapter 8 Main Memory
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#81-background" title="8.1 Background" class="md-nav__link">
    8.1 Background
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#811-basic-hardware" title="8.1.1 Basic Hardware" class="md-nav__link">
    8.1.1 Basic Hardware
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#812-address-binding" title="8.1.2 Address Binding" class="md-nav__link">
    8.1.2 Address Binding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#813-logical-versus-physical-address-space" title="8.1.3 Logical Versus Physical Address Space" class="md-nav__link">
    8.1.3 Logical Versus Physical Address Space
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#814-dynamic-loading" title="8.1.4 Dynamic Loading" class="md-nav__link">
    8.1.4 Dynamic Loading
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#815-dynamic-linking-and-shared-libraries" title="8.1.5 Dynamic Linking and Shared Libraries" class="md-nav__link">
    8.1.5 Dynamic Linking and Shared Libraries
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#82-swapping" title="8.2 Swapping" class="md-nav__link">
    8.2 Swapping
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#821-standard-swapping" title="8.2.1 Standard Swapping" class="md-nav__link">
    8.2.1 Standard Swapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#822-swapping-on-mobile-systems" title="8.2.2 Swapping on Mobile Systems" class="md-nav__link">
    8.2.2 Swapping on Mobile Systems
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#83-contiguous-memory-allocation" title="8.3 Contiguous Memory Allocation" class="md-nav__link">
    8.3 Contiguous Memory Allocation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#831-memory-protection" title="8.3.1 Memory Protection" class="md-nav__link">
    8.3.1 Memory Protection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#832-memory-allocation" title="8.3.2 Memory Allocation" class="md-nav__link">
    8.3.2 Memory Allocation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#833-fragmentation" title="8.3.3 Fragmentation" class="md-nav__link">
    8.3.3 Fragmentation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#84-segmentation" title="8.4 Segmentation" class="md-nav__link">
    8.4 Segmentation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#841-basic-method" title="8.4.1 Basic Method" class="md-nav__link">
    8.4.1 Basic Method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#842-segmentation-hardware" title="8.4.2 Segmentation Hardware" class="md-nav__link">
    8.4.2 Segmentation Hardware
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#85-paging" title="8.5 Paging" class="md-nav__link">
    8.5 Paging
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#852-hardware-support" title="8.5.2 Hardware Support" class="md-nav__link">
    8.5.2 Hardware Support
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#853-protection" title="8.5.3 Protection" class="md-nav__link">
    8.5.3 Protection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#854-shared-pages" title="8.5.4 Shared Pages" class="md-nav__link">
    8.5.4 Shared Pages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#86-structure-of-the-page-table" title="8.6 Structure of the Page Table" class="md-nav__link">
    8.6 Structure of the Page Table
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#861-hierarchical-paging" title="8.6.1 Hierarchical Paging" class="md-nav__link">
    8.6.1 Hierarchical Paging
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#862-hashed-page-tables" title="8.6.2 Hashed Page Tables" class="md-nav__link">
    8.6.2 Hashed Page Tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#863-inverted-page-tables" title="8.6.3 Inverted Page Tables" class="md-nav__link">
    8.6.3 Inverted Page Tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#864-oracle-sparc-solaris" title="8.6.4 Oracle SPARC Solaris" class="md-nav__link">
    8.6.4 Oracle SPARC Solaris
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#87-example-intel-32-and-64-bit-architectures" title="8.7 Example: Intel 32 and 64-bit Architectures" class="md-nav__link">
    8.7 Example: Intel 32 and 64-bit Architectures
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#871-ia-32-architecture" title="8.7.1 IA-32 Architecture" class="md-nav__link">
    8.7.1 IA-32 Architecture
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#8711-ia-32-segmentation" title="8.7.1.1 IA-32 Segmentation" class="md-nav__link">
    8.7.1.1 IA-32 Segmentation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8712-ia-32-paging" title="8.7.1.2 IA-32 Paging" class="md-nav__link">
    8.7.1.2 IA-32 Paging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#872-x86-64" title="8.7.2 x86-64" class="md-nav__link">
    8.7.2 x86-64
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#88-example-arm-architecture" title="8.8 Example: ARM Architecture" class="md-nav__link">
    8.8 Example: ARM Architecture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#89-summary" title="8.9 Summary" class="md-nav__link">
    8.9 Summary
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Chap09/" title="Chapter 9 Virtual Memory" class="md-nav__link">
      Chapter 9 Virtual Memory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Previous Exams
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        Previous Exams
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../midterm/" title="Midterm" class="md-nav__link">
      Midterm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../final/" title="Final" class="md-nav__link">
      Final
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Machine Learning
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Machine Learning
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ML/" title="Preface" class="md-nav__link">
      Preface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ML/1/" title="Lec 1 - Regression - Case Study" class="md-nav__link">
      Lec 1 - Regression - Case Study
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ML/2/" title="Lec 2 - Where does the error com from?" class="md-nav__link">
      Lec 2 - Where does the error com from?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ML/3/" title="Lec 3 - Gradient Descent" class="md-nav__link">
      Lec 3 - Gradient Descent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ML/4/" title="Lec 4 - Classification" class="md-nav__link">
      Lec 4 - Classification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ML/5/" title="Lec 5 - Logistic Regression" class="md-nav__link">
      Lec 5 - Logistic Regression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ML/6/" title="Lec 6 - Deep Learning" class="md-nav__link">
      Lec 6 - Deep Learning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ML/7/" title="Lec 7 - Backpropagation" class="md-nav__link">
      Lec 7 - Backpropagation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ML/8/" title="Lec 8 - "Hello world" of Deep Learning" class="md-nav__link">
      Lec 8 - "Hello world" of Deep Learning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ML/9/" title="Lec 9 - Tips for Deep Learning" class="md-nav__link">
      Lec 9 - Tips for Deep Learning
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#81-background" title="8.1 Background" class="md-nav__link">
    8.1 Background
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#811-basic-hardware" title="8.1.1 Basic Hardware" class="md-nav__link">
    8.1.1 Basic Hardware
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#812-address-binding" title="8.1.2 Address Binding" class="md-nav__link">
    8.1.2 Address Binding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#813-logical-versus-physical-address-space" title="8.1.3 Logical Versus Physical Address Space" class="md-nav__link">
    8.1.3 Logical Versus Physical Address Space
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#814-dynamic-loading" title="8.1.4 Dynamic Loading" class="md-nav__link">
    8.1.4 Dynamic Loading
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#815-dynamic-linking-and-shared-libraries" title="8.1.5 Dynamic Linking and Shared Libraries" class="md-nav__link">
    8.1.5 Dynamic Linking and Shared Libraries
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#82-swapping" title="8.2 Swapping" class="md-nav__link">
    8.2 Swapping
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#821-standard-swapping" title="8.2.1 Standard Swapping" class="md-nav__link">
    8.2.1 Standard Swapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#822-swapping-on-mobile-systems" title="8.2.2 Swapping on Mobile Systems" class="md-nav__link">
    8.2.2 Swapping on Mobile Systems
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#83-contiguous-memory-allocation" title="8.3 Contiguous Memory Allocation" class="md-nav__link">
    8.3 Contiguous Memory Allocation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#831-memory-protection" title="8.3.1 Memory Protection" class="md-nav__link">
    8.3.1 Memory Protection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#832-memory-allocation" title="8.3.2 Memory Allocation" class="md-nav__link">
    8.3.2 Memory Allocation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#833-fragmentation" title="8.3.3 Fragmentation" class="md-nav__link">
    8.3.3 Fragmentation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#84-segmentation" title="8.4 Segmentation" class="md-nav__link">
    8.4 Segmentation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#841-basic-method" title="8.4.1 Basic Method" class="md-nav__link">
    8.4.1 Basic Method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#842-segmentation-hardware" title="8.4.2 Segmentation Hardware" class="md-nav__link">
    8.4.2 Segmentation Hardware
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#85-paging" title="8.5 Paging" class="md-nav__link">
    8.5 Paging
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#852-hardware-support" title="8.5.2 Hardware Support" class="md-nav__link">
    8.5.2 Hardware Support
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#853-protection" title="8.5.3 Protection" class="md-nav__link">
    8.5.3 Protection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#854-shared-pages" title="8.5.4 Shared Pages" class="md-nav__link">
    8.5.4 Shared Pages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#86-structure-of-the-page-table" title="8.6 Structure of the Page Table" class="md-nav__link">
    8.6 Structure of the Page Table
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#861-hierarchical-paging" title="8.6.1 Hierarchical Paging" class="md-nav__link">
    8.6.1 Hierarchical Paging
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#862-hashed-page-tables" title="8.6.2 Hashed Page Tables" class="md-nav__link">
    8.6.2 Hashed Page Tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#863-inverted-page-tables" title="8.6.3 Inverted Page Tables" class="md-nav__link">
    8.6.3 Inverted Page Tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#864-oracle-sparc-solaris" title="8.6.4 Oracle SPARC Solaris" class="md-nav__link">
    8.6.4 Oracle SPARC Solaris
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#87-example-intel-32-and-64-bit-architectures" title="8.7 Example: Intel 32 and 64-bit Architectures" class="md-nav__link">
    8.7 Example: Intel 32 and 64-bit Architectures
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#871-ia-32-architecture" title="8.7.1 IA-32 Architecture" class="md-nav__link">
    8.7.1 IA-32 Architecture
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#8711-ia-32-segmentation" title="8.7.1.1 IA-32 Segmentation" class="md-nav__link">
    8.7.1.1 IA-32 Segmentation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8712-ia-32-paging" title="8.7.1.2 IA-32 Paging" class="md-nav__link">
    8.7.1.2 IA-32 Paging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#872-x86-64" title="8.7.2 x86-64" class="md-nav__link">
    8.7.2 x86-64
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#88-example-arm-architecture" title="8.8 Example: ARM Architecture" class="md-nav__link">
    8.8 Example: ARM Architecture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#89-summary" title="8.9 Summary" class="md-nav__link">
    8.9 Summary
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/walkccc/CS/edit/master/docs/OS/Chap08.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="chapter-8-main-memory">Chapter 8 Main Memory<a class="headerlink" href="#chapter-8-main-memory" title="Permanent link">&para;</a></h1>
<h2 id="81-background">8.1 Background<a class="headerlink" href="#81-background" title="Permanent link">&para;</a></h2>
<p>The CPU fetches instructions from memory according to the value of the program counter.</p>
<p>Memory Management Motivation:</p>
<ul>
<li>Keep several processes in memory to improve a system's performance</li>
</ul>
<h3 id="811-basic-hardware">8.1.1 Basic Hardware<a class="headerlink" href="#811-basic-hardware" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p><strong>Main memory</strong> and the <strong>registers</strong> built into the processor itself are the only general-purpose storage that the CPU can access directly.</p>
</div>
<p>We need to make sure that each process has a separate memory space.</p>
<p>We can provide this protection by using two registers, usually <strong>a  base</strong> and <strong>a limit</strong>.</p>
<p><img alt="normal" src="../../assets/os/8.1.png" />
<img alt="normal" src="../../assets/os/8.2.png" /></p>
<h3 id="812-address-binding">8.1.2 Address Binding<a class="headerlink" href="#812-address-binding" title="Permanent link">&para;</a></h3>
<p>The binding of instructions and data to memory addresses can be done at any step along the way:</p>
<ul>
<li><strong>Compile time</strong>: absolute code.</li>
<li><strong>Load time</strong>: relocatable code.</li>
<li><strong>Execution time</strong></li>
</ul>
<p><img alt="small" src="../../assets/os/8.3.png" /></p>
<p>A major portion of this chapter is devoted to showing how these various bindings can be implemented effectively in a computer system and to discussing appropriate hardware support.</p>
<h3 id="813-logical-versus-physical-address-space">8.1.3 Logical Versus Physical Address Space<a class="headerlink" href="#813-logical-versus-physical-address-space" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Logical address</p>
<p>An address generated by the CPU.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Physical address</p>
<p>An address seen by the memory unit and loaded into the memory-address register.</p>
</div>
<ul>
<li>
<p>Generating identical logical and physical addresses:</p>
<ul>
<li>Compile-time address-binding</li>
<li>Load-time address-binding</li>
</ul>
</li>
<li>
<p>Generating different logical and physical addresses:</p>
<ul>
<li>Execution-time address-binding<ul>
<li>logical address $\to$ <strong>virtual address</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Logical address space</p>
<p>The set of all logical addresses generated by a program.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Physical address space</p>
<p>The set of all physical addresses corresponding to these logical addresses.</p>
</div>
<p>!!! note Memory-management unit (MMU)
    Run-time map from virtual to physical addresses.</p>
<p><img alt="normal" src="../../assets/os/8.4.png" /></p>
<p>The user program never sees the real physical addresses and deals with logical addresses.</p>
<p>The memory-mapping hardware converts logical addresses into physical addresses</p>
<h3 id="814-dynamic-loading">8.1.4 Dynamic Loading<a class="headerlink" href="#814-dynamic-loading" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Dynamic loading</p>
<p>A routine is not loaded until it is called.</p>
</div>
<h3 id="815-dynamic-linking-and-shared-libraries">8.1.5 Dynamic Linking and Shared Libraries<a class="headerlink" href="#815-dynamic-linking-and-shared-libraries" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Dynamically linked libraries</p>
<p>System libraries that are linked to user programs when the programs are run.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Static linking</p>
<p>System libraries are treated like any other object module and are combined by the loader into the binary program image.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Dynamic linking</p>
<p>Linking is postponed until execution time. e.g. language subroutine libraries.</p>
</div>
<p>With dynamic linking, a <strong>stub</strong> is included in the image for each library-routine reference.</p>
<div class="admonition note">
<p class="admonition-title">Stub</p>
<p>A small piece of code that indicates how to locate the appropriate memory-resident library routine or how to load the library if the routine is not already present.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Shared libraries</p>
<p>Only programs that are compiled with the new library version are affected by any incompatible changes incorporated in it. Other programs linked before the new library was installed will continue using the older library.</p>
</div>
<h2 id="82-swapping">8.2 Swapping<a class="headerlink" href="#82-swapping" title="Permanent link">&para;</a></h2>
<p>A process must be in memory to be executed. A process, however, can be swapped temporarily out of memory to a <strong>backing store</strong> and then brought back into memory for continued execution.</p>
<h3 id="821-standard-swapping">8.2.1 Standard Swapping<a class="headerlink" href="#821-standard-swapping" title="Permanent link">&para;</a></h3>
<p><img alt="normal" src="../../assets/os/8.5.png" /></p>
<p>The context-switch time in such a swapping system is fairly high.</p>
<p>Let's assume that the user process is 100 MB in size and the backing store is a standard hard disk with a transfer rate of 50 MB per second. The actual transfer of the 100-MB process to or from main memory takes</p>
<p>$$\frac{100\text{MB}}{50\text{MB}/s} = 2s.$$</p>
<h3 id="822-swapping-on-mobile-systems">8.2.2 Swapping on Mobile Systems<a class="headerlink" href="#822-swapping-on-mobile-systems" title="Permanent link">&para;</a></h3>
<p>Mobile systems do not support swapping in general but might have paging (iOS and Android)</p>
<h2 id="83-contiguous-memory-allocation">8.3 Contiguous Memory Allocation<a class="headerlink" href="#83-contiguous-memory-allocation" title="Permanent link">&para;</a></h2>
<p>The memory is usually divided into two partitions: </p>
<ul>
<li>one for the resident operating system and </li>
<li>one for the user processes.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Contiguous memory allocation</p>
<p>Each process is contained in a single section of memory that is contiguous to the section containing the next process.</p>
</div>
<h3 id="831-memory-protection">8.3.1 Memory Protection<a class="headerlink" href="#831-memory-protection" title="Permanent link">&para;</a></h3>
<ul>
<li>The <strong>relocation register</strong> contains the value of the smallest <em>physical address</em>.</li>
<li>The <strong>limit register</strong> contains the range of <em>logical addresses</em>.</li>
</ul>
<p><img alt="normal" src="../../assets/os/8.6.png" /></p>
<h3 id="832-memory-allocation">8.3.2 Memory Allocation<a class="headerlink" href="#832-memory-allocation" title="Permanent link">&para;</a></h3>
<p>One of the simplest methods for allocating memory is to divide memory into several fixed-sized <strong>partitions</strong>.</p>
<p>Thus, the degree of multiprogramming is bound by the number of partitions.</p>
<ul>
<li>
<p>In this <strong>multiple-partition method</strong>, when a partition is free, a process is selected from the input queue and is loaded into the free partition.</p>
</li>
<li>
<p>In the <strong>variable-partition</strong> scheme, the operating system keeps a table indicating which parts of memory are available and which are occupied.</p>
</li>
</ul>
<p><strong>Dynamic storage-allocation problem</strong> concerns how to satisfy a request of size $n$ from a list of free holes. There are many solutions to this problem:</p>
<ul>
<li><strong>First fit</strong></li>
<li><strong>Best fit</strong></li>
<li><strong>Worst fit</strong></li>
</ul>
<p>Simulations have shown that both first fit and best fit are better than worst fit in terms of decreasing time and storage utilization. Neither first fit nor best fit is clearly better than the other in terms of storage utilization, but first fit is generally faster.</p>
<h3 id="833-fragmentation">8.3.3 Fragmentation<a class="headerlink" href="#833-fragmentation" title="Permanent link">&para;</a></h3>
<p>Both the first-fit and best-fit strategies for memory allocation suffer from <strong>external fragmentation</strong>.</p>
<div class="admonition note">
<p class="admonition-title">External fragmentation</p>
<p>There is enough total memory space to satisfy a request but the available spaces are not contiguous</p>
</div>
<div class="admonition note">
<p class="admonition-title">50-percent rule</p>
<p>Even with some optimization, given $N$ allocated blocks, another $0.5 N$ blocks will be lost to fragmentation. That is, one-third of memory may be unusable!</p>
</div>
<div class="admonition note">
<p class="admonition-title">Internal fragmentation</p>
<p>The memory allocated to a process may be slightly larger than the requested memory. The difference between these two numbers is internal fragmentation.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Compaction</p>
<p>The goal is to shuffle the memory contents so as to place all free memory together in one large block.</p>
</div>
<p>Compaction is possible only if</p>
<ul>
<li>relocation is dynamic and </li>
<li>is done at execution time.</li>
</ul>
<p>Another possible solution to the external-fragmentation problem is to permit the logical address space of the processes to be noncontiguous, thus allowing a process to be allocated physical memory wherever such memory is available:</p>
<ul>
<li>Segmentation</li>
<li>Paging</li>
</ul>
<h2 id="84-segmentation">8.4 Segmentation<a class="headerlink" href="#84-segmentation" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Segmentation</p>
<p>A memory-management scheme that supports this programmer view of memory.</p>
</div>
<h3 id="841-basic-method">8.4.1 Basic Method<a class="headerlink" href="#841-basic-method" title="Permanent link">&para;</a></h3>
<p>segments are numbered and are referred to by a segment number, rather than by a segment name. Thus, a logical address consists of a <em>two tuple</em>: </p>
<p><center>
&lt;<em>segment-number, offset</em>&gt;
</center></p>
<h3 id="842-segmentation-hardware">8.4.2 Segmentation Hardware<a class="headerlink" href="#842-segmentation-hardware" title="Permanent link">&para;</a></h3>
<p>A logical address consists of two parts: </p>
<ul>
<li>a segment number: $s$</li>
<li>an offset into that segment: $d$</li>
</ul>
<p><strong>Segment table</strong> consists of</p>
<ul>
<li>a segment base: contains the starting physical address where the segment resides in memory.</li>
<li>a segment limit: specifies the length of the segment.</li>
</ul>
<p><img alt="normal" src="../../assets/os/8.8.png" /></p>
<h2 id="85-paging">8.5 Paging<a class="headerlink" href="#85-paging" title="Permanent link">&para;</a></h2>
<p>Paging avoids external fragmentation and the need for compaction, whereas segmentation does not.</p>
<ul>
<li>breaking physical memory into fixed-sized blocks called <strong>frames</strong></li>
<li>breaking logical memory into blocks of the same size called <strong>pages</strong></li>
</ul>
<p>Every address generated by the CPU is divided into two parts:</p>
<ul>
<li>a <strong>page number (p)</strong> </li>
<li>a <strong>page offset (d)</strong></li>
</ul>
<p><img alt="normal" src="../../assets/os/8.10.png" /></p>
<p><img alt="normal" src="../../assets/os/8.11.png" /></p>
<p>If the size of the logical address space is $2^m$, and a page size is $2^n$ bytes. The logical address is as follows:</p>
<p><img alt="normal" src="../../assets/os/page.png" /></p>
<p>On my MacBook Pro (15-inch, 2017), I obtain the page size of 4096 bytes = 4 KB.
<img alt="normal" src="../../assets/os/pagesize.png" /></p>
<p>In the worst case, a process would need $n$ pages plus $1$ byte. It would be allocated $n + 1$ frames, resulting in internal fragmentation of almost an entire frame.</p>
<div class="admonition note">
<p class="admonition-title">Frame table</p>
<p>It has one entry for each physical page frame, indicating whether the latter is free or allocated and, if it is allocated, to which page of which process or processes.</p>
</div>
<h3 id="852-hardware-support">8.5.2 Hardware Support<a class="headerlink" href="#852-hardware-support" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>The page table is implemented as a set of dedicated <strong>registers</strong>.</p>
<ul>
<li>pros: fast</li>
<li>cons: entries could be small</li>
</ul>
</li>
<li>
<p>The page table is kept in main memory, and a <strong>page-table base register</strong> (<strong>PTBR</strong>) points to the page table. Changing page tables requires changing only this one register, substantially reducing context-switch time.</p>
<ul>
<li>pros: entries could be large</li>
<li>cons: slow (the time required to access a user memory location)<ul>
<li>With this scheme, <strong><em>two</em></strong> memory accesses are needed to access a byte (one for the page-table entry, one for the byte)</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Translation look-aside buffer (TLB)</p>
<p>The TLB is associative, high-speed memory. Each entry in the TLB consists of two parts:</p>
<ul>
<li>a key (or tag)</li>
<li>a value</li>
</ul>
</div>
<p>The TLB contains only a few of the page-table entries (typically between 32 and 1024 entries). When a logical address is generated by the CPU, its page number is presented to the TLB. If the page number is found, its frame number is immediately available and is used to access memory. As just mentioned, <em>these steps are executed as part of the instruction pipeline within the CPU, adding no performance penalty</em> compared with a system that does not implement paging.</p>
<div class="admonition note">
<p class="admonition-title">TLB miss</p>
<p>The page number is not in the TLB.</p>
</div>
<p><img alt="normal" src="../../assets/os/8.14.png" /></p>
<div class="admonition info">
<p class="admonition-title">TLB replacement policies</p>
<p>If the TLB is already full of entries, an existing entry must be selected for replacement. Replacement policies range from <strong>least recently used (LRU)</strong> through round-robin to random.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Wire down</p>
<p>Some TLBs allow certain entries to be <strong>wired down</strong>, meaning that they cannot be removed from the TLB. Typically, TLB entries for key kernel code are wired down.</p>
</div>
<p>Some TLBs store <strong>address-space identifiers</strong> (<strong>ASIDs</strong>) in each TLB entry.</p>
<div class="admonition note">
<p class="admonition-title">ASID</p>
<p>An ASID uniquely identiﬁes each process and is used to provide address-space protection for that process.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Hit ratio</p>
<p>The percentage of times that the page number of interest is found in the TLB.</p>
</div>
<h3 id="853-protection">8.5.3 Protection<a class="headerlink" href="#853-protection" title="Permanent link">&para;</a></h3>
<p>We can create hardware to provide read-only, read-write, or execute-only protection.</p>
<div class="admonition note">
<p class="admonition-title">Valid–invalid bit</p>
<p>When this bit is set to valid, the associated page is in the process's logical address space and is thus a legal page.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Page-table length register (PTLR)</p>
<p>To indicate the size of the page table.</p>
</div>
<h3 id="854-shared-pages">8.5.4 Shared Pages<a class="headerlink" href="#854-shared-pages" title="Permanent link">&para;</a></h3>
<p>To be sharable, the code must be reentrant. The read-only nature of shared code should not be left to the correctness of the code; the operating system should enforce this property.</p>
<h2 id="86-structure-of-the-page-table">8.6 Structure of the Page Table<a class="headerlink" href="#86-structure-of-the-page-table" title="Permanent link">&para;</a></h2>
<h3 id="861-hierarchical-paging">8.6.1 Hierarchical Paging<a class="headerlink" href="#861-hierarchical-paging" title="Permanent link">&para;</a></h3>
<p>Hierarchical paging is also known as <strong>forward-mapped page table</strong>.</p>
<p><img alt="normal" src="../../assets/os/8.18.png" /></p>
<p><img alt="normal" src="../../assets/os/page2.png" /></p>
<p>The VAX minicomputer from Digital Equipment Corporation (DEC):</p>
<p><img alt="normal" src="../../assets/os/VAX.png" /></p>
<h3 id="862-hashed-page-tables">8.6.2 Hashed Page Tables<a class="headerlink" href="#862-hashed-page-tables" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Clustered page tables</p>
<p>Each entry in the hash table refers to several pages (such as 16) rather than a single page, which are particularly useful for  address spaces.</p>
</div>
<p><img alt="normal" src="../../assets/os/8.19.png" /></p>
<h3 id="863-inverted-page-tables">8.6.3 Inverted Page Tables<a class="headerlink" href="#863-inverted-page-tables" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Inverted page table</p>
<p>An inverted page table has one entry for each real page (or frame) of memory. Each entry consists of the virtual address of the page stored in that real memory location, with information about the process that owns the page.</p>
</div>
<p><img alt="normal" src="../../assets/os/8.20.png" /></p>
<p>For the <strong><em>IBM RT</em></strong>, each virtual address in the system consists of a triple:</p>
<p><center>
&lt;<em>process-id, page-number, offset</em>&gt;
</center></p>
<div class="admonition info">
<p class="admonition-title">Shared memory &amp; Inverted page tables</p>
<p>Shared memory cannot be used with inverted page tables; because there is only one virtual page entry for every physical page, one physical page cannot have two (or more) shared virtual addresses.</p>
</div>
<h3 id="864-oracle-sparc-solaris">8.6.4 Oracle SPARC Solaris<a class="headerlink" href="#864-oracle-sparc-solaris" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">TLB walk</p>
<ul>
<li>If a match is found in the TSB, the CPU copies the TSB entry into the TLB, and the memory translation completes.</li>
<li>If no match is found in the TSB, the kernel is interrupted to search the hash table.</li>
</ul>
</div>
<h2 id="87-example-intel-32-and-64-bit-architectures">8.7 Example: Intel 32 and 64-bit Architectures<a class="headerlink" href="#87-example-intel-32-and-64-bit-architectures" title="Permanent link">&para;</a></h2>
<h3 id="871-ia-32-architecture">8.7.1 IA-32 Architecture<a class="headerlink" href="#871-ia-32-architecture" title="Permanent link">&para;</a></h3>
<p><img alt="normal" src="../../assets/os/8.21.png" /></p>
<p>segmentation unit + paging unit = memory-management unit (MMU)</p>
<h4 id="8711-ia-32-segmentation">8.7.1.1 IA-32 Segmentation<a class="headerlink" href="#8711-ia-32-segmentation" title="Permanent link">&para;</a></h4>
<p>The logical address is a pair (selector, offset), where the selector is a 16-bit number:</p>
<p><img alt="normal" src="../../assets/os/IA-32.png" /></p>
<ul>
<li>$s$: the segment number</li>
<li>$g$: GDT or LDT</li>
<li>$p$: protection.</li>
</ul>
<p><img alt="normal" src="../../assets/os/8.22.png" /></p>
<h4 id="8712-ia-32-paging">8.7.1.2 IA-32 Paging<a class="headerlink" href="#8712-ia-32-paging" title="Permanent link">&para;</a></h4>
<p><img alt="normal" src="../../assets/os/8.23.png" /></p>
<div class="admonition note">
<p class="admonition-title">Page address extension (PAE)</p>
<p>It allows 32-bit processors to access a physical address space larger than 4 GB.</p>
</div>
<p><img alt="normal" src="../../assets/os/8.24.png" /></p>
<h3 id="872-x86-64">8.7.2 x86-64<a class="headerlink" href="#872-x86-64" title="Permanent link">&para;</a></h3>
<h2 id="88-example-arm-architecture">8.8 Example: ARM Architecture<a class="headerlink" href="#88-example-arm-architecture" title="Permanent link">&para;</a></h2>
<h2 id="89-summary">8.9 Summary<a class="headerlink" href="#89-summary" title="Permanent link">&para;</a></h2>
<ul>
<li>Hardware support</li>
<li>Performance</li>
<li>Fragmentation</li>
<li>Relocation</li>
<li>Swapping</li>
<li>Sharing</li>
<li>Protection</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Chap07/" title="Chapter 7 Deadlocks" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Chapter 7 Deadlocks
              </span>
            </div>
          </a>
        
        
          <a href="../Chap09/" title="Chapter 9 Virtual Memory" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Chapter 9 Virtual Memory
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Built by <a href="http://github.com/walkccc">Jay Chen</a> &copy; 2017 - 2019
          </div>
        
        Email: <a href="mailto:walkccray@gmail.com">walkccray@gmail.com</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/walkccc" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://walkccc.github.io/blog" class="md-footer-social__link fa fa-quote-left"></a>
    
      <a href="https://walkccc.github.io/CLRS" class="md-footer-social__link fa fa-book"></a>
    
      <a href="https://walkccc.github.io/webapps" class="md-footer-social__link fa fa-gamepad"></a>
    
      <a href="https://www.linkedin.com/in/jay-chen-57852313a" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://www.instagram.com/walkccc" class="md-footer-social__link fa fa-instagram"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../js/mathjax.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
    
      
    
  </body>
</html>